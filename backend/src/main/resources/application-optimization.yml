spring:
  jpa:
    hibernate:
      ddl-auto: validate  # Use Flyway for schema management
    properties:
      hibernate:
        # Phase 10: Batch operations
        jdbc:
          batch_size: 20
          fetch_size: 50
        order_inserts: true
        order_updates: true
        batch_versioned_data: true
        
        # Query optimization
        query:
          in_clause_parameter_padding: true
          plan_cache_max_size: 2048
          
        # Second-level cache (optional)
        cache:
          use_second_level_cache: false  # Enable if using Redis/Hazelcast
          region:
            factory_class: org.hibernate.cache.jcache.JCacheRegionFactory
            
        # Logging (disable in production)
        show_sql: false
        format_sql: true
        use_sql_comments: true
        
        # Statistics for monitoring
        generate_statistics: true
        
        # Connection pool optimization
        connection:
          provider_disables_autocommit: true
          
  datasource:
    hikari:
      # Phase 10: Connection pool tuning
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      
      # Performance
      auto-commit: false
      
      # Monitoring
      register-mbeans: true
      
      # Connection test query
      connection-test-query: SELECT 1
      
# Phase 10: Query timeout configuration
spring.jpa.properties.javax.persistence.query.timeout: 5000

# Logging
logging:
  level:
    org.hibernate.SQL: WARN
    org.hibernate.type.descriptor.sql.BasicBinder: WARN
    org.hibernate.stat: INFO  # Enable for statistics
    com.zaxxer.hikari: INFO   # Connection pool monitoring
